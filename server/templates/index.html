{% extends "base.html" %}

{% block title %}Chat & Notas{% endblock %}

{% block page_title %}Chat & Notas{% endblock %}

{% block content %}
<div class="container-fluid h-100">
    <div class="row h-100">
        <!-- Lista de Chats -->
        <div class="col-md-3 chat-list">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="mb-0">Conversas</h5>
                <button class="btn btn-primary btn-sm" onclick="newChat()">
                    <i class="bi bi-plus-lg"></i> Nova Conversa
                </button>
            </div>
            <div class="chat-items" id="chatList">
                <!-- Lista de chats será preenchida via JavaScript -->
            </div>
        </div>

        <!-- Área do Chat -->
        <div class="col-md-6 chat-area">
            <div class="chat-messages" id="chatMessages">
                <!-- Mensagens serão preenchidas via JavaScript -->
            </div>
            <div class="chat-input">
                <form id="messageForm" class="d-flex gap-2">
                    <div class="flex-grow-1">
                        <textarea 
                            class="form-control" 
                            id="messageInput" 
                            rows="2" 
                            placeholder="Digite sua mensagem..."
                        ></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="bi bi-send"></i>
                    </button>
                </form>
            </div>
        </div>

        <!-- Área de Notas Rápidas -->
        <div class="col-md-3 quick-notes">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="mb-0">Notas Rápidas</h5>
                <button class="btn btn-outline-primary btn-sm" onclick="newQuickNote()">
                    <i class="bi bi-plus-lg"></i> Nova Nota
                </button>
            </div>
            <div class="notes-list" id="quickNotesList">
                <!-- Notas rápidas serão preenchidas via JavaScript -->
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Funções para gerenciamento de chat
    function newChat() {
        // Implementar criação de novo chat
    }

    function newQuickNote() {
        // Implementar criação de nova nota rápida
    }

    // Inicialização da página
    document.addEventListener('DOMContentLoaded', () => {
        const messageForm = document.getElementById('messageForm');
        
        messageForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const messageInput = document.getElementById('messageInput');
            const message = messageInput.value.trim();
            
            if (message) {
                showLoading();
                try {
                    // Implementar envio de mensagem para o backend
                    messageInput.value = '';
                } catch (error) {
                    showToast('Erro ao enviar mensagem', 'danger');
                } finally {
                    hideLoading();
                }
            }
        });
    });
</script>
{% endblock %} 